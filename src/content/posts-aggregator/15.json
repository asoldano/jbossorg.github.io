{
  "title": "Keycloak 21.0.2 released",
  "link": "https://www.keycloak.org/2023/03/keycloak-2102-released",
  "author": [
    {
      "name": null,
      "avatar": null
    }
  ],
  "date": "2023-03-30T00:00:00.000Z",
  "feed_title": "Keycloak Blog",
  "feed_avatar": "https://www.gravatar.com/avatar/87fe00619f08c241da8dfb23d907ffa2?s=50",
  "content": "To download the release go to .   RELEASE NOTES   MONOREPO  In the past Keycloak was maintained across multiple GitHub repositories:   *    *    *   Having multiple repositories introduced a lot of complexity and toil. For example frequently multiple pull requests had to be sent to different repositories for a single change.  To simplify things we have now migrated everything into the .   FIPS 140-2 SUPPORT  FIPS 140-2 support in Keycloak, which was preview in the previous release, is now promoted to be officially supported.   EXPERIMENTAL ACCOUNT CONSOLE VERSION 3  The Account Console version 3 is now available as an experimental feature in Keycloak. This version supports custom fields created with the 'User Profile' feature. If you are looking to try it out and provide us with some early feedback you can enable it as follows:  bin/kc.sh start-dev --features=account3   CHANGES TO KEYCLOAK AUTHORIZATION SERVICES SUPPORT IN KEYCLOAK JAVA-BASED ADAPTERS  As part of the removal of the adapters, the Keycloak Policy Enforcer was extracted from the adapters code base into a separate dependency:  <dependency>     <groupId>org.keycloak</groupId>     <artifactId>keycloak-policy-enforcer</artifactId>     <version>21.1.0</version> </dependency>  By providing this dependency, we expect making it possible to integrate the policy enforcer with the Java stack of your preference.  It also provides built-in support for enabling the policy enforcer to Jakarta applications protected with .  For now, this dependency is not yet GA as we are still working on the quickstarts and documentation.  This work should not impact existing applications using the deprecated adapters. = Javascript engine available by default  In the previous version, when Keycloak was used on Java 17 with Javascript providers it was needed to add the Nashorn javascript engine to the distribution. This is no longer needed as Nashorn javascript engine is available in Keycloak server by default.   MIGRATION FROM 21.0  Before you upgrade remember to backup your database. If you are not on the previous release refer to for a complete list of migration changes.   JAVASCRIPT ENGINE AVAILABLE BY DEFAULT ON THE CLASSPATH  In the previous version, when Keycloak was used on Java 17 with Javascript providers (Script authenticator, Javascript authorization policy or Script protocol mappers for OIDC and SAML clients), it was needed to copy javascript engine to the distribution. This is no longer needed as Nashorn javascript engine is available in Keycloak server by default. When you deploy script providers, it is recommended to not copy the nashorn script engine and itâ€™s dependencies into the Keycloak distribution.   CHANGE OF THE DEFAULT CLIENT ID MAPPER OF SERVICE ACCOUNT CLIENT  Default Client ID mapper of Service Account Client has been changed. Token Claim Name field value has been changed from clientId to client_id. client_id claim is compliant with OAuth2 specifications:   *    *    *   clientId userSession note still exists.   KEYCLOAK JS ADAPTER MUST BE INSTANCIATED WITH THE NEW OPERATOR  Historically it has been possible to create an instance of the Keycloak JS adapter by calling the Keycloak() function directly:  const keycloak = Keycloak();  To align this with modern conventions in the JavaScript world it has been possible to use the to create an instance instead:  const keycloak = new Keycloak();  The function-style constructor has been deprecated for a while, but starting this version we will actively log a deprecation message when it used. This style of constructor will be removed in a future version so make sure to migrate your code to use the new operator.   ALL RESOLVED ISSUES   NEW FEATURES   * Keycloak to fire an event upon realm creation/deletion keycloak  * Provide a Galleon feature pack to install the Keycloak Elytron SAML adapter    keycloak  * Build Account Console v3 as Maven artifact and include it as a theme keycloak    account/ui   ENHANCEMENTS   * Update javascript quickstarts to not copy nashorn keycloak-quickstarts  * Proxy EDGE is not being reflected in the post_logout_redirect_uri - Admin    Console Logut button keycloak oidc  * Add mapping UserSessionNoteMapper into UserInfo claims keycloak oidc  * Avoid resolving expressions twice but rely on MP config expression support    keycloak dist/quarkus  * Try to use SimpleHttp to execute SOAP calls instead default HttpURLConnection    keycloak saml  * Decouple the policy enforcer from adapters and provide a separate library    keycloak  * Policy Enforcer built-in support for Elytron and Jakarta keycloak    authorization-services  * Switch to quarkus-extension-maven-plugin keycloak dist/quarkus   BUGS   * service-account leaking in get users API with \"exact\" query parameter set    keycloak admin/api  * Authentication Flow ID not imported keycloak core  * Override of SSO Session Max for client does not work keycloak oidc  * Unexpected invalid_grant error on offline session refresh when maximum number    of offline sessions is configured keycloak storage  * id_token_hint for external IDP not sent after token expiry keycloak oidc  * Token contains old DB values with \"Always Read Value From LDAP\" mapper    setting keycloak ldap  * Theme can auto-select rememberMe even if disabled in a realm keycloak    authentication  * authentication checks cause 'Cookie not found' error keycloak authentication  * POST /{realm}/users/{id}/role-mappings/realm is returning 500 keycloak core  * LDAP user attribute is not updated in local database keycloak ldap  * Items in dropdown menu for sharing resources are not visible keycloak    account/ui  * Revoking consent breaks for certain client IDs keycloak account/ui  * Remove `ClearExpiredUserSessions` from services module keycloak storage  * Subject's common name user identity extractor doesn't work with some    certificate with RDN multi-valued keycloak authentication  * 414 Request-URI Too Long keycloak dist/quarkus  * ciba authentication policy not found in keycloak 19 keycloak oidc  * Default 'first broker login' default first login flow for identity providers    ignores realm user registration settings keycloak docs  * jwks endpoint for X/Y coordinates in EC keypair can return less bytes than    expected keycloak oidc  * IDENTITY_PROVIDER_FIRST_LOGIN is never triggered keycloak identity-brokering  * NPE on welcome page if setting spi-theme-default and not providing theme    keycloak core  * UserInfo: Role name mapper is not respected for user info endpoint keycloak    core  * Service Accounts Client must create the Client ID mapper with Token Claim    Name as client_id keycloak oidc  * Failed to obtain JDBC connection with built-in H2 in start-dev keycloak    storage  * When hitting the account client with the referrer parameter ,the    AccountConsole doesn't support the relative Client URLs keycloak account/api  * Regression related to redirect url with port 80 keycloak oidc  * Get UserInfo return 401 Unauthorized keycloak oidc  * New user from identity provider not having attribute mapped to user    federation (LDAP) keycloak ldap  * v20.0.2 attempts to URL decode same string up to 5 times for unclear reasons    keycloak core  * Getting notification with unknown error when trying to create duplicated sub    group. keycloak admin/api  * direct naked impersonation documentation is wrong keycloak token-exchange  * Docker auth: IllegalArgumentException on multiple resource scopes keycloak    authentication  * Typo in Outgoing HTTP requests documentation keycloak docs  * Container image from FIPS docs doesn't work keycloak core  * Disabling features with disabled dependencies fails \"Feature account2 depends    on disabled feature account-api\" keycloak core  * Connection string for ldap user federation with multiple hosts no longer    supported keycloak core  * User session limit make account console crash and logout the user keycloak    authentication  * Keycloak 21.0.1 - Paging and filtering not working in \"Assign roles\" popup\"    keycloak admin/ui  * [User Profile Enabled] Email/Password fields disappear from registration when    Email as Username is on keycloak user-profile  * Redirect loop with authentication success but access denied at default    identity provider keycloak identity-brokering  * Bug in SAML Redirect Binding with 2 validating certificates keycloak saml  * Stepup issue on \"remember_me\" authentication : alreadyLoggedIn keycloak    authentication  * SAML Signature metadata loses certificate info keycloak saml  * group don't have any clickable link even though it have the access right    permission on UI keycloak admin/ui  * Theme resource common path is always /keycloak/common keycloak core  * User with \"view-clients\" role cannot view credentials in Admin Console, but    can still use the API to fetch them. keycloak admin/ui  * admin-ui: authz unable to access child group when using fine grained auth    keycloak admin/ui  * Username field when creating user when email is set as username keycloak    admin/ui  * Admin console doesn't work in case realm name changed to name with space    keycloak admin/ui  * /users/count endpoint with search field has different behavior than /users    query endpoint keycloak storage  * Error creating realm keycloak admin/ui  * docker image 21.0.1 lacks a Javascript engine keycloak core  * Invalid Frontend URL leads to NullPointerException in OIDC Endpoints keycloak    oidc  * \"SAML signature key name\" attribute is not well forged keycloak admin/ui  * Identity Provider hard coded role mapper does not allow selection of all    roles keycloak admin/ui  * New Admin Console does not import X509 Certificate from metadata keycloak    admin/ui  * Error! Failed to send email, and Error 400 API keycloak admin/ui  * Experimental configuration options included in the documentation keycloak    docs  * [Keycloak 21.0.1] Identity provider JWKS public key is not editable via UI    keycloak admin/ui  * Unable to use SAML entity descriptor with transient NameIDFormat keycloak    admin/ui  * Read Only Attributes - Outdated configuration guide keycloak docs  * Authentication flows first paragraph seems incomplete keycloak docs  * UserFederationMapperFactory does not seem to exist anymore keycloak docs  * client credentials tab not visible with \"view-clients\" role keycloak docs  * Cannot produce an access token for the admin console keycloak docs  * Entity collections in Hibernate 6 can't be replaced keycloak storage  * Admin-UI does not show all custom attributes of Authorization Resource    keycloak admin/ui  * Flaky test: PhotozExampleLazyLoadPathsAdapterTest keycloak    authorization-services  * Adapters tests are failing for EAP and wildfly keycloak testsuite  * Hibernate 6: UnsupportedOperationException: compare() not implemented for    EntityType keycloak storage  * Profile is created twice when resolving ignored artifacts keycloak core  * Custom implemention of OIDC Login Protocol doesn't get executed keycloak oidc  * Sending 'application/jwt' Accept header to GET userinfo endpoint returns a    406 error keycloak oidc  * Incorrect documentation around password policies keycloak docs  * memory leak when using ldap user federations keycloak ldap  * Fix SSSDTest keycloak testsuite  * Inconsistent use of Enum storage in legacy store keycloak storage  * Client policies tab crashes in admin console. keycloak admin/ui  * Remove access not working in new account v2 app keycloak account/ui  * Invalid parameter redirect_uri when using an invalid client_id keycloak oidc   UPGRADING  Before you upgrade remember to backup your database and check the for anything that may have changed."
}